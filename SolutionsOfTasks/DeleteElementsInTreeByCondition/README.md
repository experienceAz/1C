## Обход дерева значений и удаление элементов отбора

```bsl
&НаСервере
Процедура ВыполнитьОбработкуНаСервере()
	ДеревоОстатки = Новый ДеревоЗначений;
	
	ДеревоОстатки.Колонки.Добавить("Склад");
	ДеревоОстатки.Колонки.Добавить("Товар");
	ДеревоОстатки.Колонки.Добавить("Количество");
	
	ОстаткиСкладаОсновной = ДеревоОстатки.Строки.Добавить();
	ОстаткиСкладаОсновной.Склад = "Основной";
	ОстаткиСкладаОсновной.Количество = 100;
	
	СтрокаОстатки = ОстаткиСкладаОсновной.Строки.Добавить();
	СтрокаОстатки.Склад = "Основной";
	СтрокаОстатки.Товар = "Кирпич";
	СтрокаОстатки.Количество = 60;
	
	СтрокаОстатки = ОстаткиСкладаОсновной.Строки.Добавить();
	СтрокаОстатки.Склад = "Основной";
	СтрокаОстатки.Товар = "Грунтовка";
	СтрокаОстатки.Количество = 40;
	                    	

	ОстаткиСкладаДополнительный = ДеревоОстатки.Строки.Добавить();
	ОстаткиСкладаДополнительный.Склад = "Дополнительный";
	ОстаткиСкладаДополнительный.Количество = 200;
	
	СтрокаОстатки = ОстаткиСкладаДополнительный.Строки.Добавить();
	СтрокаОстатки.Склад = "Дополнительный";
	СтрокаОстатки.Товар = "Кирпич";
	СтрокаОстатки.Количество = 140;
	
	СтрокаОстатки = ОстаткиСкладаДополнительный.Строки.Добавить();
	СтрокаОстатки.Склад = "Дополнительный";
	СтрокаОстатки.Товар = "Грунтовка";
	СтрокаОстатки.Количество = 60;   
	
	СтрокаОстатки = ОстаткиСкладаДополнительный.Строки.Добавить();
	СтрокаОстатки.Склад = "Дополнительный";
	СтрокаОстатки.Товар = "Грунтовка";
	СтрокаОстатки.Количество = 80;  
	
	ПараметрыОтбора = Новый Структура("Товар, Склад", "Грунтовка", "Дополнительный"); 
	НайденныеСтроки = ДеревоОстатки.Строки.НайтиСтроки(ПараметрыОтбора, Истина);
	УдалитьНаВсехУровнях(ДеревоОстатки, НайденныеСтроки);
	
КонецПроцедуры 


Процедура УдалитьНаВсехУровнях(ДеревоОстатки, СтрокиДляУдаление, Индекс = 0)  
	Пока Индекс < ДеревоОстатки.Строки.Количество() Цикл
		ИндексНайденнойСтроки = СтрокиДляУдаление.Найти(ДеревоОстатки.Строки[Индекс]);
		Если ИндексНайденнойСтроки <> Неопределено Тогда  
			ДеревоОстатки.Строки.Удалить(СтрокиДляУдаление[ИндексНайденнойСтроки]);
			Индекс = Индекс - 1;
		ИначеЕсли ДеревоОстатки.Строки[Индекс].Строки.Количество() > 0 Тогда
			УдалитьНаВсехУровнях(ДеревоОстатки.Строки[Индекс], СтрокиДляУдаление, 0);			
		КонецЕсли;
		Индекс = Индекс + 1;
	КонецЦикла;
КонецПроцедуры
```